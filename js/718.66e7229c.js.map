{"version":3,"file":"js/718.66e7229c.js","mappings":"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","sources":["webpack://my_project/./src/views/aboutuser/ResetPassword.vue","webpack://my_project/src/views/aboutuser/ResetPassword.vue","webpack://my_project/./src/views/aboutuser/ResetPassword.vue?5775","webpack://my_project/./src/views/aboutuser/ResetPassword.vue?f74b"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container mt-5 d-flex justify-content-center\"},[_c('div',{staticClass:\"layout\"},[_c('article',{staticClass:\"l-design-width\"},[_c('div',{staticClass:\"card\"},[_c('h2',[_vm._v(\"重置密碼\")]),_c('label',{staticClass:\"input\"},[((_vm.passwordFieldType)==='checkbox')?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newPassword),expression:\"newPassword\"}],staticClass:\"input__field\",attrs:{\"type\":\"password\",\"placeholder\":\"\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.newPassword)?_vm._i(_vm.newPassword,null)>-1:(_vm.newPassword)},on:{\"blur\":_vm.checkPassword,\"change\":function($event){var $$a=_vm.newPassword,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.newPassword=$$a.concat([$$v]))}else{$$i>-1&&(_vm.newPassword=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.newPassword=$$c}}}}):((_vm.passwordFieldType)==='radio')?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newPassword),expression:\"newPassword\"}],staticClass:\"input__field\",attrs:{\"type\":\"password\",\"placeholder\":\"\",\"type\":\"radio\"},domProps:{\"checked\":_vm._q(_vm.newPassword,null)},on:{\"blur\":_vm.checkPassword,\"change\":function($event){_vm.newPassword=null}}}):_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newPassword),expression:\"newPassword\"}],staticClass:\"input__field\",attrs:{\"type\":\"password\",\"placeholder\":\"\",\"type\":_vm.passwordFieldType},domProps:{\"value\":(_vm.newPassword)},on:{\"blur\":_vm.checkPassword,\"input\":function($event){if($event.target.composing)return;_vm.newPassword=$event.target.value}}}),_c('span',{staticClass:\"input__label\"},[_vm._v(\"新密碼\")]),_c('button',{staticClass:\"eye\",on:{\"click\":_vm.togglePasswordFieldType}},[(_vm.passwordFieldType === 'text')?_c('i',{staticClass:\"bi bi-eye-fill\"}):_c('i',{staticClass:\"bi bi-eye-slash-fill\"})])]),_c('small',{staticClass:\"errorhint\"},[_vm._v(_vm._s(_vm.passwordError))]),_c('label',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.confirmPassword),expression:\"confirmPassword\"}],staticClass:\"input__field\",attrs:{\"type\":\"password\",\"placeholder\":\"\"},domProps:{\"value\":(_vm.confirmPassword)},on:{\"input\":function($event){if($event.target.composing)return;_vm.confirmPassword=$event.target.value}}}),_c('span',{staticClass:\"input__label\"},[_vm._v(\"確認新密碼\")])]),_c('small',{staticClass:\"errorhint\"},[_vm._v(_vm._s(_vm.errorMessage))]),_c('div',{staticClass:\"mt-3\"},[_c('button',{on:{\"click\":_vm.reset}},[_vm._v(\"重置密碼\")])])])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"container mt-5 d-flex justify-content-center\">\r\n        <div class=\"layout\">\r\n            <article class=\"l-design-width\">\r\n                <div class=\"card\">\r\n                    <h2>重置密碼</h2>\r\n                    <label class=\"input\">\r\n                        <input\r\n                            class=\"input__field\"\r\n                            type=\"password\"\r\n                            placeholder=\"\"\r\n                            :type=\"passwordFieldType\"\r\n                            v-model=\"newPassword\"\r\n                            @blur=\"checkPassword\"\r\n                        />\r\n                        <span class=\"input__label\">新密碼</span>\r\n                        <button class=\"eye\" @click=\"togglePasswordFieldType\">\r\n                            <i\r\n                                v-if=\"passwordFieldType === 'text'\"\r\n                                class=\"bi bi-eye-fill\"\r\n                            ></i>\r\n                            <i v-else class=\"bi bi-eye-slash-fill\"></i>\r\n                        </button>\r\n                    </label>\r\n                    <small class=\"errorhint\">{{ passwordError }}</small>\r\n                    <label class=\"input\">\r\n                        <input\r\n                            class=\"input__field\"\r\n                            type=\"password\"\r\n                            placeholder=\"\"\r\n                            v-model=\"confirmPassword\"\r\n                        />\r\n                        <span class=\"input__label\">確認新密碼</span>\r\n                    </label>\r\n                    <small class=\"errorhint\">{{ errorMessage }}</small>\r\n\r\n                    <div class=\"mt-3\">\r\n                        <button @click=\"reset\">重置密碼</button>\r\n                    </div>\r\n                </div>\r\n            </article>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { resetPassword } from '../../login/firebase'\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            newPassword: '',\r\n            confirmPassword: '',\r\n            errorMessage: '',\r\n            passwordError: '',\r\n            passwordFieldType: 'password',\r\n        }\r\n    },\r\n    methods: {\r\n        async reset() {\r\n            if (!this.checkPassword) {\r\n                return\r\n            }\r\n            if (this.newPassword !== this.confirmPassword) {\r\n                this.errorMessage = '兩次輸入的密碼不一致'\r\n                return\r\n            }\r\n\r\n            const hash = window.location.hash.substring(1) // 移除 `#`\r\n            const queryParams = new URLSearchParams(hash.split('?')[1]) // 提取 `?` 之后的部分\r\n\r\n            const oobCode = queryParams.get('oobCode')\r\n            const apiKey = queryParams.get('apiKey')\r\n\r\n            console.log(oobCode)\r\n            console.log(apiKey)\r\n\r\n            if (!oobCode || !apiKey) {\r\n                this.errorMessage = '無效的重置密碼請求'\r\n                return\r\n            }\r\n\r\n            try {\r\n                await resetPassword(oobCode, this.newPassword)\r\n                alert('密碼已成功重置')\r\n                this.$router.push('login')\r\n            } catch (error) {\r\n                console.error('重置密碼錯誤:', error)\r\n                this.errorMessage = '重置密碼失敗，請稍後再試'\r\n            }\r\n        },\r\n        checkPassword() {\r\n            const password = this.newPassword\r\n            const regex = /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,24}$/\r\n            if (!regex.test(password)) {\r\n                this.passwordError =\r\n                    '※ 密碼需由8~24個大小寫字母或數字組成，並包含至少一個字母和數字'\r\n                return false\r\n            } else {\r\n                this.passwordError = ''\r\n                return true\r\n            }\r\n        },\r\n        togglePasswordFieldType() {\r\n            if (this.passwordFieldType === 'password') {\r\n                this.passwordFieldType = 'text'\r\n            } else {\r\n                this.passwordFieldType = 'password'\r\n            }\r\n        },\r\n    },\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import '../../scss/aboutuser/styles.scss';\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ResetPassword.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ResetPassword.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ResetPassword.vue?vue&type=template&id=430353c0&scoped=true\"\nimport script from \"./ResetPassword.vue?vue&type=script&lang=js\"\nexport * from \"./ResetPassword.vue?vue&type=script&lang=js\"\nimport style0 from \"./ResetPassword.vue?vue&type=style&index=0&id=430353c0&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"430353c0\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_v","passwordFieldType","directives","name","rawName","value","newPassword","expression","attrs","domProps","Array","isArray","_i","on","checkPassword","$event","$$a","$$el","target","$$c","checked","$$v","$$i","concat","slice","_q","composing","togglePasswordFieldType","_s","passwordError","confirmPassword","errorMessage","reset","staticRenderFns","data","methods","hash","window","location","substring","queryParams","URLSearchParams","split","oobCode","get","apiKey","console","log","resetPassword","alert","$router","push","error","password","regex","test","component"],"sourceRoot":""}