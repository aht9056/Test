"use strict";(self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[]).push([[718],{3718:function(s,e,a){a.r(e),a.d(e,{default:function(){return c}});var r=function(){var s=this,e=s._self._c;return e("div",{staticClass:"container mt-5 d-flex justify-content-center"},[e("div",{staticClass:"layout"},[e("article",{staticClass:"l-design-width"},[e("div",{staticClass:"card"},[e("h2",[s._v("重置密碼")]),e("label",{staticClass:"input"},["checkbox"===s.passwordFieldType?e("input",{directives:[{name:"model",rawName:"v-model",value:s.newPassword,expression:"newPassword"}],staticClass:"input__field",attrs:{type:"password",placeholder:"",type:"checkbox"},domProps:{checked:Array.isArray(s.newPassword)?s._i(s.newPassword,null)>-1:s.newPassword},on:{blur:s.checkPassword,change:function(e){var a=s.newPassword,r=e.target,t=!!r.checked;if(Array.isArray(a)){var o=null,i=s._i(a,o);r.checked?i<0&&(s.newPassword=a.concat([o])):i>-1&&(s.newPassword=a.slice(0,i).concat(a.slice(i+1)))}else s.newPassword=t}}}):"radio"===s.passwordFieldType?e("input",{directives:[{name:"model",rawName:"v-model",value:s.newPassword,expression:"newPassword"}],staticClass:"input__field",attrs:{type:"password",placeholder:"",type:"radio"},domProps:{checked:s._q(s.newPassword,null)},on:{blur:s.checkPassword,change:function(e){s.newPassword=null}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:s.newPassword,expression:"newPassword"}],staticClass:"input__field",attrs:{type:"password",placeholder:"",type:s.passwordFieldType},domProps:{value:s.newPassword},on:{blur:s.checkPassword,input:function(e){e.target.composing||(s.newPassword=e.target.value)}}}),e("span",{staticClass:"input__label"},[s._v("新密碼")]),e("button",{staticClass:"eye",on:{click:s.togglePasswordFieldType}},["text"===s.passwordFieldType?e("i",{staticClass:"bi bi-eye-fill"}):e("i",{staticClass:"bi bi-eye-slash-fill"})])]),e("small",{staticClass:"errorhint"},[s._v(s._s(s.passwordError))]),e("label",{staticClass:"input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.confirmPassword,expression:"confirmPassword"}],staticClass:"input__field",attrs:{type:"password",placeholder:""},domProps:{value:s.confirmPassword},on:{input:function(e){e.target.composing||(s.confirmPassword=e.target.value)}}}),e("span",{staticClass:"input__label"},[s._v("確認新密碼")])]),e("small",{staticClass:"errorhint"},[s._v(s._s(s.errorMessage))]),e("div",{staticClass:"mt-3"},[e("button",{on:{click:s.reset}},[s._v("重置密碼")])])])])])])},t=[],o=(a(4114),a(4603),a(7566),a(8721),a(100)),i={data(){return{newPassword:"",confirmPassword:"",errorMessage:"",passwordError:"",passwordFieldType:"password"}},methods:{async reset(){if(!this.checkPassword)return;if(this.newPassword!==this.confirmPassword)return void(this.errorMessage="兩次輸入的密碼不一致");const s=window.location.hash.substring(1),e=new URLSearchParams(s.split("?")[1]),a=e.get("oobCode"),r=e.get("apiKey");if(console.log(a),console.log(r),a&&r)try{await(0,o.resetPassword)(a,this.newPassword),alert("密碼已成功重置"),this.$router.push("login")}catch(t){console.error("重置密碼錯誤:",t),this.errorMessage="重置密碼失敗，請稍後再試"}else this.errorMessage="無效的重置密碼請求"},checkPassword(){const s=this.newPassword,e=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,24}$/;return e.test(s)?(this.passwordError="",!0):(this.passwordError="※ 密碼需由8~24個大小寫字母或數字組成，並包含至少一個字母和數字",!1)},togglePasswordFieldType(){"password"===this.passwordFieldType?this.passwordFieldType="text":this.passwordFieldType="password"}}},l=i,n=a(1656),d=(0,n.A)(l,r,t,!1,null,"430353c0",null),c=d.exports}}]);
//# sourceMappingURL=718.66e7229c.js.map