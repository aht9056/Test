"use strict";(self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[]).push([[659],{3753:function(e,t,n){n.d(t,{A:function(){return u}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"d-flex flex-grow-1"},[t("el-date-picker",{attrs:{type:"date",placeholder:"選擇日期",placement:"top"},on:{change:e.changeDate},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)},s=[],a={name:"SelectInput",props:{value:{type:String,default:()=>""}},data(){return{date:this.value}},methods:{changeDate(){if(this.date){const e=new Date(this.date),t=new Date(e.getTime()-6e4*e.getTimezoneOffset()),n=t.toISOString().split("T")[0];this.$emit("input",n)}}},beforeMount(){}},r=a,l=n(1656),o=(0,l.A)(r,i,s,!1,null,"038553a6",null),u=o.exports},902:function(e,t,n){n.d(t,{A:function(){return u}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex-grow-1"},[t("div",{staticClass:"input-select"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selects,expression:"selects"}],ref:"selectInput",staticClass:"input__field",attrs:{type:"text",placeholder:""},domProps:{value:e.selects},on:{blur:e.changeSelect,focus:function(t){e.showSelect=!0},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.addSelect.apply(null,arguments))},input:[function(t){t.target.composing||(e.selects=t.target.value)},e.filterSuggestions]}}),t("span",{staticClass:"input__label"},[e._v("出版社")]),e.showSelect&&e.filteredSuggestionsKeys.length>0?t("div",e._l(e.filteredSuggestionsKeys,(function(n){return t("div",{key:n,on:{mousedown:function(t){return e.selectSelect(n)}}},[t("div",{staticClass:"d-flex justify-content-between"},[t("span",[e._v(e._s(e.suggestions[n].name))]),t("span",[e._v("代號:"+e._s(n))])])])})),0):e._e()])])},s=[],a={name:"SelectInput",props:{value:{type:String,default:()=>""},suggestions:{type:Object,default:()=>({})}},data(){return{selects:this.value,showSelect:!1,filteredSuggestionsKeys:[]}},methods:{changeSelect(){this.showSelect=!1},selectSelect(e){this.selects=e,this.$emit("input",e)},filterSuggestions(){const e=this.selects.toLowerCase();this.filteredSuggestionsKeys=Object.keys(this.suggestions).filter((t=>t.toLowerCase().includes(e)||this.suggestions[t].name.toLowerCase().includes(e)))}},beforeMount(){this.filteredSuggestionsKeys=Object.keys(this.suggestions)}},r=a,l=n(1656),o=(0,l.A)(r,i,s,!1,null,"5a5d46ff",null),u=o.exports},7797:function(e,t,n){n.d(t,{A:function(){return u}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"d-flex flex-wrap"},[e._l(e.tags,(function(n){return t("el-tag",{key:n,staticClass:"mt-1",attrs:{closable:"","disable-transitions":!1},on:{close:function(t){return e.removeTag(n)}}},[e._v(" "+e._s(n)+" ")])})),e.inputVisible?t("div",{staticClass:"ms-1 input-new-tag"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],ref:"tagInput",attrs:{type:"text",placeholder:""},domProps:{value:e.inputValue},on:{blur:e.addTag,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.addTag.apply(null,arguments))},input:[function(t){t.target.composing||(e.inputValue=t.target.value)},e.filterSuggestions]}}),e.filteredSuggestions.length>0?t("div",e._l(e.filteredSuggestions,(function(n){return t("div",{key:n,on:{mousedown:function(t){return e.selectTag(n)}}},[e._v(" "+e._s(n)+" ")])})),0):e._e()]):t("el-button",{staticClass:"mt-1 button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v(" + 新增 ")])],2)},s=[],a=(n(4114),{name:"TagInput",props:{value:{type:Array,default:()=>[]},suggestions:{type:Array,default:()=>[]}},data(){return{tags:[...this.value],inputVisible:!1,inputValue:"",filteredSuggestions:[]}},methods:{removeTag(e){const t=this.tags.indexOf(e);t>=0&&(this.tags.splice(t,1),this.$emit("input",this.tags))},showInput(){this.inputVisible=!0,this.$nextTick((()=>{this.$refs.tagInput.focus()}))},addTag(){this.inputValue&&!this.tags.includes(this.inputValue)&&(this.tags.push(this.inputValue),this.$emit("input",this.tags)),this.inputVisible=!1,this.inputValue=""},selectTag(e){this.inputValue=e,this.addTag()},filterSuggestions(){const e=this.inputValue.toLowerCase();this.filteredSuggestions=this.suggestions.filter((t=>t.toLowerCase().includes(e)))}},beforeMount(){this.filteredSuggestions=this.suggestions}}),r=a,l=n(1656),o=(0,l.A)(r,i,s,!1,null,"6c712544",null),u=o.exports},9668:function(e,t,n){n.d(t,{A:function(){return p}});var i=function(){var e=this,t=e._self._c;return t("div",[t("button",{on:{click:e.triggerFileInput}},[e._v("選擇PDF文件")]),t("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"application/pdf"},on:{change:e.handleFileSelect}}),e.originPdf&&!e.hasFile?t("span",{staticClass:"pdf_link_btn ms-1",on:{click:function(t){return e.getPdfLink()}}},[e._v(" 查看原始文件 ")]):e.hasFile?t("span",{staticClass:"pdf_link_btn ms-1",on:{click:function(t){return e.shoSelectPdf()}}},[e._v(" "+e._s(e.nowfile.name)+" ")]):t("span",[e._v(" 未選擇任何文件 ")])])},s=[],a=(n(4603),n(7566),n(8721),n(9470)),r=n(8704),l={props:{nowfile:{type:File,default:null},originPdf:{type:Boolean,required:!1},serialNumber:{type:String,required:!1}},computed:{hasFile(){return null!==this.nowfile}},data(){return{originPdfLink:"",selectFile:null,mySerialNumber:this.serialNumber}},methods:{triggerFileInput(){this.$refs.fileInput.click()},handleFileSelect(e){const t=e.target.files[0];t&&this.isPDF(t)?(this.selectFile=t,this.$emit("file-selected",t)):alert("請選擇一個有效的 PDF 文件")},shoSelectPdf(){const e=URL.createObjectURL(this.selectFile);window.open(e,"_blank")},isPDF(e){return"application/pdf"===e.type},async getPdfLink(){try{const e=await a.A.post("/api/getPDFDownloadLink",{serialNumber:this.mySerialNumber,uid:JSON.parse(r.A.get("accountInfo")).uid,fileName:this.mySerialNumber+".pdf"});if(!e.data.success)return Promise.reject(e.data.message);{const t=e.data.url;console.log(t),window.open(t,"_blank")}}catch(e){return console.error("Error in method:",e),Promise.reject(e)}}}},o=l,u=n(1656),c=(0,u.A)(o,i,s,!1,null,null,null),p=c.exports},2187:function(e,t,n){n.d(t,{A:function(){return u}});var i=function(){var e=this,t=e._self._c;return t("div",[t("div",[t("button",{on:{click:e.triggerFileInput}},[e._v("選擇檔案夾")]),t("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",webkitdirectory:"",multiple:""},on:{change:e.handleFolderSelect}}),e.hasImages||0!=e.originContentImages.length?t("span",[e._v(" 選擇的圖檔: ")]):t("span",[e._v(" 未選擇任何圖檔 ")]),e.hasImages||0!=e.originContentImages.length?t("a",{attrs:{"data-bs-toggle":"collapse",href:"#imageCollapse",role:"button","aria-expanded":"false","aria-controls":"imageCollapse"}},[e._v("查看圖片")]):e._e()]),t("div",{staticClass:"collapse multi-collapse",attrs:{id:"imageCollapse"}},[0==e.originContentImages.length||e.hasImages?e.images.length?t("div",[t("div",{staticClass:"image-container"},e._l(e.images,(function(n,i){return t("div",{key:i,staticClass:"image-wrapper"},[t("img",{attrs:{src:e.getImageUrl(n),alt:n.name}}),t("p",[e._v(e._s(n.name))])])})),0)]):e._e():t("div",[t("div",{staticClass:"image-container"},e._l(e.originContentImages,(function(n,i){return t("div",{key:i,staticClass:"image-wrapper"},[t("img",{attrs:{src:n}}),t("p",0==i?[e._v("封面")]:[e._v("圖片"+e._s(i))])])})),0)])])])},s=[],a=(n(4603),n(7566),n(8721),{props:{images:{type:Array,default:()=>[]},originContentImages:{type:Array,default:()=>[],required:!1}},data(){return{selectedFileNames:[]}},computed:{hasImages(){return this.images.length>0}},methods:{triggerFileInput(){this.$refs.fileInput.click()},handleFolderSelect(e){const t=Array.from(e.target.files),n=t.filter((e=>this.isImage(e))),i=n.map((e=>e.name));this.selectedFileNames=i,n.length>0&&this.$emit("files-selected",n)},isImage(e){return e.type.startsWith("image/")},getImageUrl(e){return URL.createObjectURL(e)}}}),r=a,l=n(1656),o=(0,l.A)(r,i,s,!1,null,"19e6beed",null),u=o.exports},8704:function(e,t,n){
/*! js-cookie v3.0.5 | MIT */
function i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}n.d(t,{A:function(){return r}});var s={read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function a(e,t){function n(n,s,a){if("undefined"!==typeof document){a=i({},t,a),"number"===typeof a.expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),n=encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r="";for(var l in a)a[l]&&(r+="; "+l,!0!==a[l]&&(r+="="+a[l].split(";")[0]));return document.cookie=n+"="+e.write(s,n)+r}}function s(t){if("undefined"!==typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],i={},s=0;s<n.length;s++){var a=n[s].split("="),r=a.slice(1).join("=");try{var l=decodeURIComponent(a[0]);if(i[l]=e.read(r,l),t===l)break}catch(o){}}return t?i[t]:i}}return Object.create({set:n,get:s,remove:function(e,t){n(e,"",i({},t,{expires:-1}))},withAttributes:function(e){return a(this.converter,i({},this.attributes,e))},withConverter:function(e){return a(i({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var r=a(s,{path:"/"})}}]);
//# sourceMappingURL=659.7bdb1c5b.js.map